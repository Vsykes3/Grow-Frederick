(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9929],{320:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/Profile",function(){return s(2956)}])},4936:function(e,t,s){"use strict";s.d(t,{Z:function(){return m}});var a=s(5893),n=s(7294),i=s(9250),r=s(9655);s(9388);var l={src:"/_next/static/media/Grow Fred Alt Logo.b164b326.png",height:395,width:831,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAYAAACzzX7wAAAAeElEQVR42mMAgQ/PLwd/ennN4fPLa/KfXl5NAfJ53jw+zw7EDAyfX13nfvP4gvHHF1fzgIqKgTjxw/Mr5W+fXNQDYrCCDKBg1McXV4qAdCMQxwJNSP386loKkJ0KUiALZKgDjXN8/+xS9LunF4OAtB1Qg/WX19d1AMi7WzXkpt4oAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:4},o={src:"/_next/static/media/defaultIcon.c9a25193.png",height:426,width:426,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAQAAABuBnYAAAAAUElEQVR42kWIsQ3AIAwEb6hMhbIAC2SJlNmCjg3osgYtBSInQYTPsv8PThpj0WyrPjIV3ZcByKY+ReWQukXhljLFIPFPsrkvkUuiSRE8m/ABNGcwbQVK7GoAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8},c=s(6640),d=s(1479),u=s(5074),m=()=>{let{currentUser:e}=(0,c.a)(),t=(0,i.s0)(),[s,m]=(0,n.useState)(!1),f=(0,n.useRef)(null),p=async()=>{await (0,u.w7)(d.I8),m(!1)};(0,n.useEffect)(()=>{let e=e=>{f.current&&!f.current.contains(e.target)&&m(!1)};return s?document.addEventListener("mousedown",e):document.removeEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[s]);let h=(null==e?void 0:e.displayName)||"Guest",A=(null==e?void 0:e.photoURL)||o;return(0,a.jsxs)("div",{className:"header",children:[(0,a.jsxs)("div",{className:"logo-container",onClick:()=>{t("/home")},children:[(0,a.jsx)("img",{src:l,alt:"GrowCommon Logo",className:"logo"}),(0,a.jsx)("span",{className:"brand-name",children:"GrowCommon"})]}),(0,a.jsx)(r.OL,{to:"/home",className:"nav-text",children:"Home"}),(0,a.jsx)(r.OL,{to:"/about",className:"nav-text",children:"About Us"}),(0,a.jsx)(r.OL,{to:"/news",className:"nav-text",children:"News"}),(0,a.jsx)(r.OL,{to:"/map",className:"nav-text",children:"Map"}),(0,a.jsx)(r.OL,{to:"/index",className:"nav-text",children:"Plant Index"}),(0,a.jsx)(r.OL,{to:"/calendar",className:"nav-text",children:"Calendar"}),(0,a.jsx)(r.OL,{to:"/garden",className:"nav-text",children:"Start My Garden"}),!e&&(0,a.jsx)(r.OL,{to:"/login",className:"login-button",children:"Login"}),e&&(0,a.jsxs)("div",{className:"profile-container",ref:f,children:[(0,a.jsxs)("div",{className:"profile-info",onClick:()=>{m(e=>!e)},children:[(0,a.jsx)("img",{src:A,alt:"User Icon",className:"profile-icon"}),(0,a.jsx)("span",{className:"profile-name",children:h})]}),s&&(0,a.jsxs)("div",{className:"profile-dropdown",children:[(0,a.jsx)(r.OL,{to:"/profile",className:"dropdown-item",onClick:()=>m(!1),children:"Profile"}),(0,a.jsx)(r.OL,{to:"/settings",className:"dropdown-item",onClick:()=>m(!1),children:"Settings"}),(0,a.jsx)("button",{className:"dropdown-item-button",onClick:p,children:"Logout"})]})]})]})}},6640:function(e,t,s){"use strict";s.d(t,{a:function(){return i}}),s(5893);var a=s(7294);s(5074),s(1479);let n=(0,a.createContext)(null),i=()=>{let e=(0,a.useContext)(n);if(!e)throw Error("useAuth must be used within AuthProvider");return e}},1479:function(e,t,s){"use strict";s.d(t,{I8:function(){return l},tO:function(){return o}});var a=s(3977),n=s(5074),i=s(6689);let r=(0,a.ZF)({apiKey:"AIzaSyCH0307mAkCUqK3NOIdDzi75Qa9PjPPZP8",authDomain:"growfrederick-21ad9.firebaseapp.com",projectId:"growfrederick-21ad9",storageBucket:"growfrederick-21ad9.firebasestorage.app",messagingSenderId:"874977905203",appId:"1:874977905203:web:9e7fa5c4f5ef303f0b7146",measurementId:"G-LGSFVCJ8DY"}),l=(0,n.v0)(r),o=(0,i.cF)(r)},2956:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return d}});var a=s(5893),n=s(7294),i=s(6640),r=s(1479),l=s(5074),o=s(6689);s(3404);var c=s(4936);function d(){let{currentUser:e}=(0,i.a)(),t=(0,n.useRef)(),s=(0,n.useRef)(),[d,u]=(0,n.useState)(""),[m,f]=(0,n.useState)(""),[p,h]=(0,n.useState)(!1),A=async e=>{if(e.preventDefault(),u(""),f(""),!t.current.value.trim())return f("Name cannot be empty.");try{h(!0),await (0,l.ck)(r.I8.currentUser,{displayName:t.current.value.trim()}),u("Display name updated successfully.")}catch(e){f("Failed to update display name: "+e.message)}finally{h(!1)}},x=async()=>{u(""),f("");try{await (0,l.LS)(r.I8,e.email),u("Password reset email sent to "+e.email)}catch(e){f("Failed to send reset email: "+e.message)}},g=async t=>{if(t.preventDefault(),u(""),f(""),!s.current.files[0])return f("Please select an image file first.");try{h(!0);let t=s.current.files[0],a=(0,o.iH)(r.tO,"profilePictures/".concat(e.uid));await (0,o.KV)(a,t);let n=await (0,o.Jt)(a);await (0,l.ck)(r.I8.currentUser,{photoURL:n}),u("Profile picture updated successfully.")}catch(e){f("Failed to update profile picture: "+e.message)}finally{h(!1)}};return(0,a.jsxs)("div",{className:"stack",children:[(0,a.jsx)(c.Z,{}),(0,a.jsxs)("div",{className:"profile-settings-container",children:[(0,a.jsx)("h2",{children:"Profile Settings"}),m&&(0,a.jsx)("div",{className:"profile-error",children:m}),d&&(0,a.jsx)("div",{className:"profile-message",children:d}),(0,a.jsxs)("div",{className:"profile-info",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Email:"})," ",null==e?void 0:e.email]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Current Name:"})," ",(null==e?void 0:e.displayName)||"Not set"]}),(null==e?void 0:e.photoURL)&&(0,a.jsx)("img",{src:e.photoURL,alt:"Profile",className:"profile-preview"})]}),(0,a.jsxs)("form",{onSubmit:A,className:"profile-form",children:[(0,a.jsx)("label",{children:"New Display Name"}),(0,a.jsx)("input",{type:"text",placeholder:"Enter new name",ref:t,disabled:p}),(0,a.jsx)("button",{type:"submit",disabled:p,children:p?"Updating...":"Update Name"})]}),(0,a.jsx)("hr",{}),(0,a.jsxs)("form",{onSubmit:g,className:"profile-form",children:[(0,a.jsx)("label",{children:"Update Profile Picture"}),(0,a.jsx)("input",{type:"file",accept:"image/*",ref:s,disabled:p}),(0,a.jsx)("button",{type:"submit",disabled:p,children:p?"Uploading...":"Upload Picture"})]}),(0,a.jsx)("hr",{}),(0,a.jsx)("div",{className:"profile-actions",children:(0,a.jsx)("button",{onClick:x,children:"Send Password Reset Email"})})]})]})}},9388:function(){},3404:function(){}},function(e){e.O(0,[4644,2281,9250,9655,8246,2888,9774,179],function(){return e(e.s=320)}),_N_E=e.O()}]);