(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9929],{70320:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/Profile",function(){return i(92956)}])},37568:function(e,t,i){"use strict";i.d(t,{a:function(){return a}}),i(85893),i(33299);var s=i(67294);let r=(0,s.createContext)(void 0);function a(){let e=(0,s.useContext)(r);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},31208:function(){},92956:function(e,t,i){"use strict";i.r(t),i.d(t,{__N_SSP:function(){return o},default:function(){return d}});var s=i(85893),r=i(67294),a=i(37568),n=i(31208),l=i(85876),c=i(16689);i(23404);var u=i(1396),o=!0;function d(){let{currentUser:e}=(0,a.a)(),t=(0,r.useRef)(),i=(0,r.useRef)(),[o,d]=(0,r.useState)(""),[f,p]=(0,r.useState)(""),[m,h]=(0,r.useState)(!1),x=async e=>{if(e.preventDefault(),d(""),p(""),!t.current.value.trim())return p("Name cannot be empty.");try{h(!0),await (0,l.ck)(n.auth.currentUser,{displayName:t.current.value.trim()}),d("Display name updated successfully.")}catch(e){p("Failed to update display name: "+e.message)}finally{h(!1)}},j=async()=>{d(""),p("");try{await (0,l.LS)(n.auth,e.email),d("Password reset email sent to "+e.email)}catch(e){p("Failed to send reset email: "+e.message)}},N=async t=>{if(t.preventDefault(),d(""),p(""),!i.current.files[0])return p("Please select an image file first.");try{h(!0);let t=i.current.files[0],s=(0,c.iH)(n.storage,"profilePictures/".concat(e.uid));await (0,c.KV)(s,t);let r=await (0,c.Jt)(s);await (0,l.ck)(n.auth.currentUser,{photoURL:r}),d("Profile picture updated successfully.")}catch(e){p("Failed to update profile picture: "+e.message)}finally{h(!1)}};return(0,s.jsxs)("div",{className:"stack",children:[(0,s.jsx)(u.Z,{}),(0,s.jsxs)("div",{className:"profile-settings-container",children:[(0,s.jsx)("h2",{children:"Profile Settings"}),f&&(0,s.jsx)("div",{className:"profile-error",children:f}),o&&(0,s.jsx)("div",{className:"profile-message",children:o}),(0,s.jsxs)("div",{className:"profile-info",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Email:"})," ",null==e?void 0:e.email]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Current Name:"})," ",(null==e?void 0:e.displayName)||"Not set"]}),(null==e?void 0:e.photoURL)&&(0,s.jsx)("img",{src:e.photoURL,alt:"Profile",className:"profile-preview"})]}),(0,s.jsxs)("form",{onSubmit:x,className:"profile-form",children:[(0,s.jsx)("label",{children:"New Display Name"}),(0,s.jsx)("input",{type:"text",placeholder:"Enter new name",ref:t,disabled:m}),(0,s.jsx)("button",{type:"submit",disabled:m,children:m?"Updating...":"Update Name"})]}),(0,s.jsx)("hr",{}),(0,s.jsxs)("form",{onSubmit:N,className:"profile-form",children:[(0,s.jsx)("label",{children:"Update Profile Picture"}),(0,s.jsx)("input",{type:"file",accept:"image/*",ref:i,disabled:m}),(0,s.jsx)("button",{type:"submit",disabled:m,children:m?"Uploading...":"Upload Picture"})]}),(0,s.jsx)("hr",{}),(0,s.jsx)("div",{className:"profile-actions",children:(0,s.jsx)("button",{onClick:j,children:"Send Password Reset Email"})})]})]})}},23404:function(){}},function(e){e.O(0,[4893,5698,8675,776,6689,1396,2888,9774,179],function(){return e(e.s=70320)}),_N_E=e.O()}]);