(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9142],{8063:function(e,t,r){Promise.resolve().then(r.bind(r,5875))},2369:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9763).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},5875:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return g}});var a=r(7437),s=r(2265),n=r(5922),l=r(6410),o=r(2381),i=r(3145),c=r(7648),d=r(9763);let u=(0,d.Z)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);var m=r(2369);let h=(0,d.Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),x=(0,d.Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),f=(0,d.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var p=r(387);function g(){var e,t;let{user:r,loading:d}=(0,n.h)(),{user:g,updateUser:v}=(0,p.a)(),[y,b]=(0,s.useState)("notifications"),[N,j]=(0,s.useState)(""),[w,S]=(0,s.useState)(""),[k]=(0,s.useState)("fahrenheit"),[I]=(0,s.useState)("imperial"),[E,P]=(0,s.useState)({frostWarnings:!0,heatWaveAlerts:!0,plantingReminders:!0,harvestAlerts:!0,inApp:!0,email:!0}),C=(0,s.useRef)(null),[A,U]=(0,s.useState)(null);(0,s.useEffect)(()=>{g?(j(g.displayName||""),U(g.profilePicture||null)):r&&(j(r.displayName||""),S(r.email||""),U(r.photoURL||null));let e=localStorage.getItem("userDisplayName"),t=localStorage.getItem("userPhoto");!e||(null==g?void 0:g.displayName)||j(e),!t||(null==g?void 0:g.profilePicture)||U(t);let a=localStorage.getItem("notificationSettings");if(a)try{P(JSON.parse(a))}catch(e){console.error("Error loading notification settings:",e)}},[r]);let _=e=>{P(t=>{let r={...t,[e]:!t[e]};return localStorage.setItem("notificationSettings",JSON.stringify(r)),r})},D=[{id:"notifications",label:"Notifications",icon:u},{id:"account",label:"Account",icon:m.Z}];return(0,a.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,a.jsx)("div",{className:"border-b border-border bg-card",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 py-6",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Settings"}),(0,a.jsx)("p",{className:"text-muted-foreground mt-2",children:"Customize your GrowCommon experience"})]})}),(0,a.jsx)("div",{className:"container mx-auto px-4 py-6",children:(0,a.jsxs)("div",{className:"grid lg:grid-cols-4 gap-8",children:[(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsx)("div",{className:"bg-card rounded-2xl p-6 border border-border",children:(0,a.jsx)("nav",{className:"space-y-2",children:D.map(e=>{let t=e.icon;return(0,a.jsxs)("button",{onClick:()=>b(e.id),className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-left transition-all duration-200 ".concat(y===e.id?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-muted"),children:[(0,a.jsx)(t,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"font-medium",children:e.label})]},e.id)})})})}),(0,a.jsx)("div",{className:"lg:col-span-3",children:(0,a.jsxs)("div",{className:"bg-card rounded-2xl p-8 border border-border",children:["notifications"===y&&(0,a.jsx)("div",{className:"space-y-8",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-foreground mb-6",children:"Notifications"}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-foreground",children:"Weather Alerts"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:E.frostWarnings,onChange:()=>_("frostWarnings"),className:"rounded w-5 h-5"}),(0,a.jsx)("span",{className:"text-sm text-foreground",children:"Frost warnings"})]}),(0,a.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:E.heatWaveAlerts,onChange:()=>_("heatWaveAlerts"),className:"rounded w-5 h-5"}),(0,a.jsx)("span",{className:"text-sm text-foreground",children:"Heat wave alerts"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-foreground",children:"Garden Reminders"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:E.plantingReminders,onChange:()=>_("plantingReminders"),className:"rounded w-5 h-5"}),(0,a.jsx)("span",{className:"text-sm text-foreground",children:"Planting reminders"})]}),(0,a.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:E.harvestAlerts,onChange:()=>_("harvestAlerts"),className:"rounded w-5 h-5"}),(0,a.jsx)("span",{className:"text-sm text-foreground",children:"Harvest alerts"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-foreground",children:"Notification Methods"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:E.inApp,onChange:()=>_("inApp"),className:"rounded w-5 h-5"}),(0,a.jsx)("span",{className:"text-sm text-foreground",children:"In-app notifications"})]}),(0,a.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:E.email,onChange:()=>_("email"),className:"rounded w-5 h-5"}),(0,a.jsx)("span",{className:"text-sm text-foreground",children:"Email notifications"})]})]})]})]})]})}),"account"===y&&(0,a.jsx)("div",{className:"space-y-8",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-foreground mb-6",children:"Account"}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-foreground",children:"Profile Picture"}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[A?(0,a.jsx)("div",{className:"relative w-20 h-20 rounded-full overflow-hidden border-2 border-primary",children:(0,a.jsx)(i.default,{src:A,alt:N||"User",fill:!0,className:"object-cover"})}):(0,a.jsx)("div",{className:"w-20 h-20 rounded-full bg-primary flex items-center justify-center text-primary-foreground text-2xl font-semibold border-2 border-primary",children:(null==N?void 0:null===(e=N[0])||void 0===e?void 0:e.toUpperCase())||(null==w?void 0:null===(t=w[0])||void 0===t?void 0:t.toUpperCase())||"U"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("input",{type:"file",ref:C,onChange:e=>{var t;let r=null===(t=e.target.files)||void 0===t?void 0:t[0];if(r){if(r.size>5242880){alert("Image must be less than 5MB");return}if(!r.type.startsWith("image/")){alert("Please select an image file");return}let e=new FileReader;e.onloadend=()=>{let t=e.result;U(t),localStorage.setItem("userPhoto",t),window.dispatchEvent(new Event("userDataUpdated")),alert('Photo updated! Click "Save Changes" to confirm.')},e.readAsDataURL(r)}},accept:"image/*",className:"hidden"}),(0,a.jsxs)(o.Button,{variant:"outline",size:"sm",onClick:()=>{var e;null===(e=C.current)||void 0===e||e.click()},children:[(0,a.jsx)(h,{className:"h-4 w-4 mr-2"}),"Change Photo"]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Click to upload a new profile picture (max 5MB)"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-foreground",children:"Profile Information"}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Display Name"}),(0,a.jsx)("input",{type:"text",value:N,onChange:e=>j(e.target.value),placeholder:"Your name",className:"w-full px-3 py-2 border border-border rounded-lg bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Email"}),(0,a.jsx)("input",{type:"email",value:w,disabled:!0,placeholder:"your@email.com",className:"w-full px-3 py-2 border border-border rounded-lg bg-muted text-muted-foreground cursor-not-allowed"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Email cannot be changed"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-foreground",children:"Subscription"}),(0,a.jsx)("div",{className:"p-4 bg-muted rounded-lg border border-border",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-foreground",children:"Free Plan"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Basic features included"})]}),(0,a.jsx)(c.default,{href:"/pricing",children:(0,a.jsx)(o.Button,{children:"Upgrade to Pro"})})]})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-foreground",children:"Data & Privacy"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)(o.Button,{variant:"outline",className:"w-full justify-start",onClick:()=>{let e=new Blob([JSON.stringify({displayName:N,email:w,preferences:{temperatureUnit:k,distanceUnit:I},notifications:E,exportDate:new Date().toISOString()},null,2)],{type:"application/json"}),t=URL.createObjectURL(e),r=document.createElement("a");r.href=t,r.download="growcommon-data-".concat(new Date().toISOString().split("T")[0],".json"),document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t),alert("Data exported successfully!")},children:[(0,a.jsx)(x,{className:"h-4 w-4 mr-2"}),"Export My Data"]}),(0,a.jsxs)(o.Button,{variant:"outline",className:"w-full justify-start text-destructive hover:text-destructive hover:bg-destructive/10",onClick:()=>{confirm("Are you sure you want to delete your account? This action cannot be undone.")&&confirm("This will permanently delete all your data. Are you absolutely sure?")&&(localStorage.removeItem("userDisplayName"),localStorage.removeItem("userPhoto"),localStorage.removeItem("temperatureUnit"),localStorage.removeItem("distanceUnit"),localStorage.removeItem("notificationSettings"),localStorage.removeItem("myGardens"),localStorage.removeItem("calendarEvents"),sessionStorage.clear(),r&&(0,l.w7)(),window.location.href="/",alert("Account deleted successfully. All your data has been removed."))},children:[(0,a.jsx)(f,{className:"h-4 w-4 mr-2"}),"Delete Account"]})]})]})]})]})}),(0,a.jsx)("div",{className:"pt-6 border-t border-border mt-8",children:(0,a.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,a.jsx)(o.Button,{variant:"outline",onClick:()=>window.location.reload(),children:"Cancel"}),(0,a.jsx)(o.Button,{onClick:()=>{localStorage.setItem("temperatureUnit",k),localStorage.setItem("distanceUnit",I),localStorage.setItem("notificationSettings",JSON.stringify(E)),v({displayName:N||"",profilePicture:A||null}),alert("Settings saved successfully!")},children:"Save Changes"})]})})]})})]})})]})}},2381:function(e,t,r){"use strict";r.r(t),r.d(t,{Button:function(){return c},buttonVariants:function(){return i}});var a=r(7437),s=r(2265),n=r(5293),l=r(535),o=r(3448);let i=(0,l.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"text-foreground hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,t)=>{let{className:r,variant:s,size:l,asChild:c=!1,...d}=e,u=c?n.g7:"button";return(0,a.jsx)(u,{className:(0,o.cn)(i({variant:s,size:l,className:r})),ref:t,...d})});c.displayName="Button"},387:function(e,t,r){"use strict";r.d(t,{UserProvider:function(){return l},a:function(){return o}});var a=r(7437),s=r(2265);let n=(0,s.createContext)(void 0);function l(e){let{children:t}=e,[r,l]=(0,s.useState)(null),[o,i]=(0,s.useState)(!0);(0,s.useEffect)(()=>{let e=()=>{try{let e=localStorage.getItem("userDisplayName"),t=localStorage.getItem("userPhoto");(e||t)&&l({displayName:e||"",profilePicture:t||null})}catch(e){console.error("Error loading user data:",e)}finally{i(!1)}};e();let t=()=>{e()};return window.addEventListener("userDataUpdated",t),()=>{window.removeEventListener("userDataUpdated",t)}},[]);let c=(0,s.useCallback)(e=>{l(t=>{let r=t?{...t,...e}:{displayName:e.displayName||"",profilePicture:e.profilePicture||null};return r.displayName?localStorage.setItem("userDisplayName",r.displayName):localStorage.removeItem("userDisplayName"),r.profilePicture?localStorage.setItem("userPhoto",r.profilePicture):localStorage.removeItem("userPhoto"),window.dispatchEvent(new CustomEvent("userDataUpdated",{bubbles:!0,detail:r})),r})},[]),d=(0,s.useCallback)(e=>{l(e),e?(e.displayName&&localStorage.setItem("userDisplayName",e.displayName),e.profilePicture&&localStorage.setItem("userPhoto",e.profilePicture)):(localStorage.removeItem("userDisplayName"),localStorage.removeItem("userPhoto"))},[]);return(0,a.jsx)(n.Provider,{value:{user:r,setUser:d,updateUser:c,loading:o},children:t})}function o(){let e=(0,s.useContext)(n);if(void 0===e)throw Error("useUser must be used within a UserProvider");return e}},5922:function(e,t,r){"use strict";r.d(t,{h:function(){return l}});var a=r(2265),s=r(6410),n=r(2148);function l(){let[e,t]=(0,a.useState)(null),[r,l]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{let e=(0,n.Aj)(s.I8,e=>{t(e),l(!1)});return()=>e()},[]),{user:e,loading:r}}},6410:function(e,t,r){"use strict";let a;r.d(t,{I8:function(){return i},Ry:function(){return u},Yb:function(){return m},qj:function(){return d},w7:function(){return h}});var s=r(738),n=r(2148),l=r(257);let o={apiKey:l.env.NEXT_PUBLIC_FIREBASE_API_KEY||"AIzaSyCH0307mAkCUqK3NOIdDzi75Qa9PjPPZP8",authDomain:l.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN||"growfrederick-21ad9.firebaseapp.com",projectId:l.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID||"growfrederick-21ad9",storageBucket:l.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET||"growfrederick-21ad9.firebasestorage.app",messagingSenderId:l.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID||"874977905203",appId:l.env.NEXT_PUBLIC_FIREBASE_APP_ID||"1:874977905203:web:9e7fa5c4f5ef303f0b7146"};a=0===(0,s.C6)().length?(0,s.ZF)(o):(0,s.C6)()[0];let i=(0,n.v0)(a),c=new n.hJ,d=async()=>{try{return(await (0,n.rh)(i,c)).user}catch(e){throw Error(e.message)}},u=async(e,t)=>{try{return(await (0,n.e5)(i,e,t)).user}catch(e){throw Error(e.message)}},m=async(e,t)=>{try{return(await (0,n.Xb)(i,e,t)).user}catch(e){throw Error(e.message)}},h=async()=>{try{await (0,n.w7)(i)}catch(e){throw Error(e.message)}}},3448:function(e,t,r){"use strict";r.d(t,{cn:function(){return n}});var a=r(1994),s=r(3335);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,a.W)(t))}}},function(e){e.O(0,[9015,5050,2972,5878,4384,2971,2117,1744],function(){return e(e.s=8063)}),_N_E=e.O()}]);